<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Saudação</title>
    <style>
      body {
        font-family: "JetBrains Mono";
        margin: 0;
        padding: 0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        transition: background-image 0.5s;
        background-size: cover;
        background-repeat: no-repeat;
      }

      h1#titulo {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        font-weight: bold;
        letter-spacing: 2px;
        text-shadow: 1px 1px 8px rgba(0, 0, 0, 0.15);
      }

      p#hora,
      p#data,
      p#diaSemana {
        font-size: 1.2rem;
        margin: 0.2rem 0;
        color: #333;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 8px;
        padding: 0.3rem 1rem;
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.07);
      }

      p#frase {
        font-size: 1.4rem;
        margin-top: 1.5rem;
        font-style: italic;
        color: #222;
        background: rgba(255, 255, 255, 0.7);
        border-left: 5px solid #ffd700;
        border-radius: 8px;
        padding: 0.7rem 1.2rem;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        min-width: 320px;
        max-width: 90vw;
      }

      @media (max-width: 600px) {
        h1#titulo {
          font-size: 1.5rem;
        }
        p#frase {
          font-size: 1rem;
          min-width: 180px;
        }
      }
    </style>
    <meta name="theme-color" content="#000000" />

    <link rel="icon" href="image/icon-192.png" type="image/png" />
    <!-- o manifest.json diz nome, icones, cores e comportamento do seu app quando instalado como PWA -->
    <link rel="manifest" href="manifest.json" />
  </head>
  <body>
    <h1 id="titulo"></h1>
    <p id="hora"></p>
    <p id="data"></p>
    <p id="diaSemana"></p>
    <p id="frase"></p>

    <script>
      // Array global para armazenar as frases conforme o período do dia

      let frase = [];

      function trocar() {
        let agora = new Date();
        let hora = agora.getHours();
        const opcoes = {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric",
        };
        const dataFormatada = agora.toLocaleDateString("pt-BR", opcoes);
        let minutos = agora.getMinutes().toString().padStart(2, "0");
        let segundos = agora.getSeconds().toString().padStart(2, "0");
        const diaSemana = agora.getDay();

        let cor;
        let mensagem;
        let dia;
        if (diaSemana >= 1 && diaSemana <= 5) {
          dia = "Hoje é dia útil, foco nas atividades!";
        } else {
          dia = "Hoje é fim de semana, aproveite para descansar!";
        }
        if (hora >= 6 && hora < 12) {
          background = "url('/src/image/morning.jpg')";
          mensagem = "Bom dia!";
          frase = [
            "Manhã é para quem madruga.",
            "Acorde com determinação, vá dormir com satisfação.",
            "Cada manhã é uma nova oportunidade.",
          ];
        } else if (hora >= 12 && hora < 18) {
          background = "url('/src/image/afternoon.jpg')";
          mensagem = "Boa tarde!";
          frase = [
            "Tarde é para quem trabalha.",
            "A tarde é uma criança que brinca com o sol.",
            "Aproveite a tarde para recarregar suas energias.",
          ];
        } else if (hora >= 18 && hora < 23) {
          background = "url('/src/image/night.jpg')";
          mensagem = "Boa noite";
          frase = [
            "Noite é para quem sonha.",
            "A noite é a parte do dia onde os sonhos ganham vida.",
            "Aproveite a noite para relaxar e refletir sobre o dia.",
          ];
        }

        document.body.style.backgroundImage = background;
        document.getElementById("titulo").innerHTML = mensagem;

        document.getElementById("hora").innerHTML =
          hora + ":" + minutos + ":" + segundos;
        document.getElementById("data").innerHTML = dataFormatada;
        document.getElementById("diaSemana").innerHTML = dia;
      }

      function trocarFrase() {
        // esse if é para garantir que o array frase não está vazio
        // se o array estiver vazio, não faz nada

        if (frase.length > 0) {
          // gera um índice aleatório baseado no tamanho do array de frases
          // e usa esse índice para selecionar uma frase aleatória
          // e exibe essa frase no elemento com id "frase"

          const indiceAleatorio = Math.floor(Math.random() * frase.length);
          document.getElementById("frase").innerHTML = frase[indiceAleatorio];
        }
      }

      window.onload = function () {
        trocar();
        trocarFrase();
        setInterval(trocar, 1000);
        setInterval(trocarFrase, 5000);
      };
    </script>

    <!-- Sem esse trecho o pwa não funcionaria offline, o cache não seria utilizado
 e recursos como instalação na tela inicial seriam limitados. com ele o navegador sabe que é um pwa, arquivos são armazenados em cache, o app pode ser usado sem internet-->
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("service-worker.js")
          .then(() => console.log("Service Worker Registered"))
          .catch((err) => console.log("SW ERROR:", err));
      }
    </script>
  </body>
</html>
